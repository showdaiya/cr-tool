# ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€ã‚¯ãƒ©ãƒ­ãƒ¯ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—ãƒ„ãƒ¼ãƒ«ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã¨å®Ÿè£…è©³ç´°ã‚’èª¬æ˜ã—ã¾ã™ã€‚

---

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
cr-tool/
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â””â”€â”€ deploy-pages.yml          # GitHub Pages ãƒ‡ãƒ—ãƒ­ã‚¤è‡ªå‹•åŒ–
â”œâ”€â”€ cr-tool-react-next-app/           # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ (Next.js)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/                      # Next.js App Router
â”‚   â”‚   â”‚   â”œâ”€â”€ layout.tsx            # ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx              # ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚   â””â”€â”€ globals.css           # ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¹ã‚¿ã‚¤ãƒ« (Tailwind)
â”‚   â”‚   â”œâ”€â”€ components/               # Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ CardBattlePage.tsx    # ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ DefenceCard.tsx       # é˜²è¡›ã‚«ãƒ¼ãƒ‰è¡¨ç¤º
â”‚   â”‚   â”‚   â”œâ”€â”€ AttackCard.tsx        # æ”»æ’ƒã‚«ãƒ¼ãƒ‰è¡¨ç¤º
â”‚   â”‚   â”‚   â”œâ”€â”€ AttackCardSection.tsx # æ”»æ’ƒã‚«ãƒ¼ãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³
â”‚   â”‚   â”‚   â”œâ”€â”€ SelectCardOverlay.tsx # ã‚«ãƒ¼ãƒ‰é¸æŠã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤
â”‚   â”‚   â”‚   â”œâ”€â”€ SelectableCardListItem.tsx # ã‚«ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ 
â”‚   â”‚   â”‚   â”œâ”€â”€ DefenseNotification.tsx    # ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«è¿½å¾“é€šçŸ¥
â”‚   â”‚   â”‚   â”œâ”€â”€ ErrorBoundary.tsx     # ã‚¨ãƒ©ãƒ¼ãƒã‚¦ãƒ³ãƒ€ãƒª
â”‚   â”‚   â”‚   â””â”€â”€ ui/                   # shadcn/ui ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚   â”œâ”€â”€ context/                  # Context API
â”‚   â”‚   â”‚   â””â”€â”€ CardContext.tsx       # ã‚«ãƒ¼ãƒ‰çŠ¶æ…‹ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ data/                     # é™çš„ãƒ‡ãƒ¼ã‚¿
â”‚   â”‚   â”‚   â””â”€â”€ CardData_new.json     # ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
â”‚   â”‚   â”œâ”€â”€ hooks/                    # ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”‚   â”‚   â”‚   â””â”€â”€ useResetStateOnClose.ts # ãƒ¢ãƒ¼ãƒ€ãƒ«çŠ¶æ…‹ãƒªã‚»ãƒƒãƒˆ
â”‚   â”‚   â”œâ”€â”€ lib/                      # ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â”‚   â””â”€â”€ utils.ts              # Tailwind ã‚¯ãƒ©ã‚¹çµåˆ
â”‚   â”‚   â”œâ”€â”€ types/                    # TypeScriptå‹å®šç¾©
â”‚   â”‚   â”‚   â”œâ”€â”€ CardTypes.ts          # ã‚«ãƒ¼ãƒ‰å‹å®šç¾©
â”‚   â”‚   â”‚   â””â”€â”€ damage-type-translations.ts # ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚¿ã‚¤ãƒ—ç¿»è¨³
â”‚   â”‚   â”œâ”€â”€ utils/                    # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°
â”‚   â”‚   â”‚   â””â”€â”€ cardUtils.ts          # ã‚«ãƒ¼ãƒ‰é–¢é€£ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°
â”‚   â”‚   â””â”€â”€ constants.ts              # å®šæ•°å®šç¾©
â”‚   â”œâ”€â”€ public/                       # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”‚   â””â”€â”€ resized_cards/            # ã‚«ãƒ¼ãƒ‰ç”»åƒ (PNG)
â”‚   â”œâ”€â”€ tests/                        # ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”‚   â””â”€â”€ ui.components.test.tsx    # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ next.config.js                # Next.jsè¨­å®š (Static Export)
â”‚   â”œâ”€â”€ tailwind.config.js            # Tailwind CSSè¨­å®š
â”‚   â”œâ”€â”€ vitest.config.ts              # Vitestè¨­å®š
â”‚   â””â”€â”€ package.json                  # ä¾å­˜é–¢ä¿‚ãƒ»ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ cr-tool-react-app/                # æ—§å®Ÿè£… (Viteç‰ˆãƒ»ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–)
â”œâ”€â”€ docs/                             # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ FEATURES.md                   # æ©Ÿèƒ½ä¸€è¦§
â”‚   â”œâ”€â”€ ARCHITECTURE.md               # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€â”€ DEPLOYMENT.md                 # ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †
â”œâ”€â”€ PROJECT_PLAN.md                   # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨ˆç”»æ›¸
â”œâ”€â”€ CODING_STANDARDS.md               # ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„
â””â”€â”€ README.md                         # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦
```

---

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

### ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

- **Next.js 15** (App Router)
  - Static Export ãƒ¢ãƒ¼ãƒ‰ (`output: 'export'`)
  - ã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹é…ä¿¡å¯¾å¿œ (GitHub Pages, Vercel)
  - ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° (CSR)

### UIãƒ©ã‚¤ãƒ–ãƒ©ãƒª

- **shadcn/ui** + **Radix UI**
  - ã‚¢ã‚¯ã‚»ã‚·ãƒ–ãƒ«ãªUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
  - Tailwind CSSãƒ™ãƒ¼ã‚¹ã®ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°
- **Tailwind CSS**
  - ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆCSS
  - ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ (`dark:` variant)

### çŠ¶æ…‹ç®¡ç†

- **React Context API**
  - ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ç®¡ç† (`CardContext`)
  - ã‚«ãƒ¼ãƒ‰é¸æŠã€æ”»æ’ƒã‚«ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆã€ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—çµæœ

### å‹ã‚·ã‚¹ãƒ†ãƒ 

- **TypeScript**
  - å®Œå…¨ãªå‹å®‰å…¨æ€§
  - å³æ ¼ãªå‹ãƒã‚§ãƒƒã‚¯ (`strict: true`)

---

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       CardContext                            â”‚
â”‚  (ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ç®¡ç†)                                          â”‚
â”‚                                                               â”‚
â”‚  - allCards: AnyCard[]          (å…¨ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿)              â”‚
â”‚  - defenceCard: AnyCard | null  (é¸æŠä¸­ã®é˜²è¡›ã‚«ãƒ¼ãƒ‰)           â”‚
â”‚  - attackCards: AttackCardState[] (æ”»æ’ƒã‚«ãƒ¼ãƒ‰ãƒªã‚¹ãƒˆ)          â”‚
â”‚  - totalDamage: number          (ç·ãƒ€ãƒ¡ãƒ¼ã‚¸ - è¨ˆç®—æ¸ˆã¿)        â”‚
â”‚  - remainingHP: number          (æ®‹ã‚ŠHP - è¨ˆç®—æ¸ˆã¿)           â”‚
â”‚                                                               â”‚
â”‚  Actions:                                                     â”‚
â”‚  - setDefenceCard(card)         (é˜²è¡›ã‚«ãƒ¼ãƒ‰è¨­å®š)              â”‚
â”‚  - addAttackCard(card)          (æ”»æ’ƒã‚«ãƒ¼ãƒ‰è¿½åŠ )              â”‚
â”‚  - updateAttackCard(index, card) (æ”»æ’ƒã‚«ãƒ¼ãƒ‰æ›´æ–°)            â”‚
â”‚  - removeAttackCard(index)      (æ”»æ’ƒã‚«ãƒ¼ãƒ‰å‰Šé™¤)              â”‚
â”‚  - resetState()                 (å…¨ãƒªã‚»ãƒƒãƒˆ)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚       CardBattlePage (ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸)       â”‚
        â”‚                                           â”‚
        â”‚  - é˜²è¡›ã‚«ãƒ¼ãƒ‰é¸æŠãƒœã‚¿ãƒ³                    â”‚
        â”‚  - æ”»æ’ƒã‚«ãƒ¼ãƒ‰è¿½åŠ ãƒœã‚¿ãƒ³                    â”‚
        â”‚  - ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—çµæœè¡¨ç¤º                    â”‚
        â”‚  - ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½                           â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“          â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚  DefenceCard     â”‚  â”‚ AttackCardSection â”‚
        â”‚  (é˜²è¡›ã‚«ãƒ¼ãƒ‰è¡¨ç¤º) â”‚  â”‚ (æ”»æ’ƒã‚«ãƒ¼ãƒ‰ä¸€è¦§)  â”‚
        â”‚                  â”‚  â”‚                  â”‚
        â”‚  - HPè¡¨ç¤º        â”‚  â”‚  - AttackCard[]  â”‚
        â”‚  - æ®‹ã‚ŠHPè¡¨ç¤º    â”‚  â”‚  - å°è¨ˆè¡¨ç¤º      â”‚
        â”‚  - é€²æ—ãƒãƒ¼      â”‚  â”‚  - ç·¨é›†/å‰Šé™¤     â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â†“                      â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚    SelectCardOverlay (ãƒ¢ãƒ¼ãƒ€ãƒ«)       â”‚
        â”‚                                        â”‚
        â”‚  - ã‚«ãƒ¼ãƒ‰æ¤œç´¢                          â”‚
        â”‚  - ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ (éƒ¨éšŠ/å»ºç‰©/å‘ªæ–‡)        â”‚
        â”‚  - ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½                          â”‚
        â”‚  - ã‚«ãƒ¼ãƒ‰é¸æŠ                          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§© ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

### 1. CardContext (çŠ¶æ…‹ç®¡ç†)

**è²¬å‹™:**
- å…¨ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã¨ç®¡ç†
- é˜²è¡›ã‚«ãƒ¼ãƒ‰ãƒ»æ”»æ’ƒã‚«ãƒ¼ãƒ‰ã®çŠ¶æ…‹ç®¡ç†
- ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ (useMemo ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥)

**ä¸»è¦ãªçŠ¶æ…‹:**
```typescript
interface CardContextType {
  allCards: AnyCard[];
  defenceCard: AnyCard | null;
  attackCards: AttackCardState[];
  totalDamage: number;          // è¨ˆç®—æ¸ˆã¿ (useMemo)
  remainingHP: number;          // è¨ˆç®—æ¸ˆã¿ (useMemo)
  setDefenceCard: (card: AnyCard | null) => void;
  addAttackCard: (card: AttackCardState) => void;
  updateAttackCard: (index: number, card: AttackCardState) => void;
  removeAttackCard: (index: number) => void;
  resetState: () => void;
}
```

**ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯:**
```typescript
// ç·ãƒ€ãƒ¡ãƒ¼ã‚¸ = Î£(æ”»æ’ƒã‚«ãƒ¼ãƒ‰[i]ã®ãƒ€ãƒ¡ãƒ¼ã‚¸)
totalDamage = useMemo(() => {
  return attackCards.reduce((sum, card) => sum + calculateDamage(card), 0);
}, [attackCards]);

// æ®‹ã‚ŠHP = é˜²è¡›ã‚«ãƒ¼ãƒ‰HP - ç·ãƒ€ãƒ¡ãƒ¼ã‚¸
remainingHP = useMemo(() => {
  return defenceCard ? getInitialHp(defenceCard) - totalDamage : 0;
}, [defenceCard, totalDamage]);
```

---

### 2. CardBattlePage (ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸)

**è²¬å‹™:**
- ãƒšãƒ¼ã‚¸å…¨ä½“ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆç®¡ç†
- é˜²è¡›ã‚«ãƒ¼ãƒ‰ãƒ»æ”»æ’ƒã‚«ãƒ¼ãƒ‰ã®è¡¨ç¤º
- ãƒ¢ãƒ¼ãƒ€ãƒ«é–‹é–‰åˆ¶å¾¡
- ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½

**ä¸»è¦æ©Ÿèƒ½:**
- IntersectionObserver ã«ã‚ˆã‚‹é˜²è¡›ã‚«ãƒ¼ãƒ‰å¯è¦–æ€§æ¤œå‡º
- ãƒ˜ãƒ«ãƒ—æƒ…å ±ã®è¡¨ç¤º/éè¡¨ç¤º
- ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚µãƒãƒªãƒ¼è¡¨ç¤º

---

### 3. DefenceCard (é˜²è¡›ã‚«ãƒ¼ãƒ‰è¡¨ç¤º)

**è²¬å‹™:**
- é˜²è¡›ã‚«ãƒ¼ãƒ‰ã®è¡¨ç¤º
- HPæ®‹é‡ã®é€²æ—ãƒãƒ¼è¡¨ç¤º
- å‹•çš„ã‚«ãƒ©ãƒ¼å¤‰åŒ– (HPæ®‹é‡ã«å¿œã˜ã¦ç·‘â†’é»„â†’èµ¤)

**ç‰¹å¾´:**
- HPæ®‹é‡ã«å¿œã˜ãŸè‰²å¤‰åŒ–:
  - HP > 50%: ç·‘ (`bg-green-500`)
  - 20% < HP â‰¤ 50%: é»„ (`bg-yellow-500`)
  - HP â‰¤ 20%: èµ¤ (`bg-red-500`)

---

### 4. AttackCard & AttackCardSection (æ”»æ’ƒã‚«ãƒ¼ãƒ‰ç®¡ç†)

**è²¬å‹™:**
- æ”»æ’ƒã‚«ãƒ¼ãƒ‰ã®è¡¨ç¤ºãƒ»ç·¨é›†ãƒ»å‰Šé™¤
- è¤‡æ•°ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚¿ã‚¤ãƒ—ã®æ”»æ’ƒå›æ•°è¨­å®š
- å°è¨ˆè¡¨ç¤º

**ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚¿ã‚¤ãƒ—:**
- é€šå¸¸ãƒ€ãƒ¡ãƒ¼ã‚¸ (`damage`)
- ç¯„å›²ãƒ€ãƒ¡ãƒ¼ã‚¸ (`area_damage`)
- ã‚¿ãƒ¯ãƒ¼ãƒ€ãƒ¡ãƒ¼ã‚¸ (`crown_tower_damage`)
- æ­»äº¡æ™‚ãƒ€ãƒ¡ãƒ¼ã‚¸ (`death_damage`)
- å¬å–šæ™‚ãƒ€ãƒ¡ãƒ¼ã‚¸ (`spawn_damage`)
- ãƒ€ãƒƒã‚·ãƒ¥ãƒ€ãƒ¡ãƒ¼ã‚¸ (`dash_damage`)
- ãã®ä»– (è‡ªå‹•æ¤œå‡º)

---

### 5. SelectCardOverlay (ã‚«ãƒ¼ãƒ‰é¸æŠã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤)

**è²¬å‹™:**
- ã‚«ãƒ¼ãƒ‰æ¤œç´¢
- ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ (éƒ¨éšŠ/å»ºç‰©/å‘ªæ–‡)
- ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½ (æ—¥æœ¬èªå/è‹±èªå/ID)
- ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚° (attack/defenceå±æ€§)

**ç‰¹å¾´:**
- é…å»¶ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚° (ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–)
- React.memo ã«ã‚ˆã‚‹ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã®æœ€é©åŒ–

---

## ğŸ”„ ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«

### 1. åˆæœŸåŒ–ãƒ•ãƒ­ãƒ¼

```
1. Next.js Appèµ·å‹•
   â†“
2. CardContextåˆæœŸåŒ–
   - CardData_new.json èª­ã¿è¾¼ã¿
   - ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé˜²è¡›ã‚«ãƒ¼ãƒ‰è¨­å®š (ã‚¢ãƒ¼ãƒãƒ£ãƒ¼)
   â†“
3. CardBattlePage ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
   â†“
4. IntersectionObserver è¨­å®š (é˜²è¡›ã‚«ãƒ¼ãƒ‰å¯è¦–æ€§æ¤œå‡º)
```

### 2. ã‚«ãƒ¼ãƒ‰é¸æŠãƒ•ãƒ­ãƒ¼

```
1. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒã€Œé¸æŠã€ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯
   â†“
2. SelectCardOverlay è¡¨ç¤º
   â†“
3. ã‚«ãƒ¼ãƒ‰é¸æŠ (æ¤œç´¢/ãƒ•ã‚£ãƒ«ã‚¿/ã‚½ãƒ¼ãƒˆ)
   â†“
4. setDefenceCard() or addAttackCard() å®Ÿè¡Œ
   â†“
5. Contextæ›´æ–° â†’ å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
   â†“
6. ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®— (useMemo)
```

### 3. ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—ãƒ•ãƒ­ãƒ¼

```
1. æ”»æ’ƒã‚«ãƒ¼ãƒ‰è¿½åŠ /ç·¨é›†
   â†“
2. attackCards[] æ›´æ–°
   â†“
3. totalDamage å†è¨ˆç®— (useMemo)
   â†“
4. remainingHP å†è¨ˆç®— (useMemo)
   â†“
5. UIæ›´æ–° (DefenceCard ã®é€²æ—ãƒãƒ¼ã€è‰²å¤‰åŒ–)
```

---

## ğŸ¨ ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°æˆ¦ç•¥

### Tailwind CSS

- **ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ**: `sm:`, `md:`, `lg:` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹
- **ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰**: `dark:` ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ (ã‚·ã‚¹ãƒ†ãƒ è¨­å®šã«å¿œã˜ã¦è‡ªå‹•åˆ‡æ›¿)

### ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ (globals.css)

```css
:root {
  --background: 0 0% 100%;         /* ç™½ */
  --foreground: 222.2 84% 4.9%;    /* ãƒ€ãƒ¼ã‚¯ã‚°ãƒ¬ãƒ¼ */
  --primary: 222.2 47.4% 11.2%;    /* ãƒ€ãƒ¼ã‚¯ãƒ–ãƒ«ãƒ¼ */
  --secondary: 210 40% 96.1%;      /* ãƒ©ã‚¤ãƒˆã‚°ãƒ¬ãƒ¼ */
  --accent: 210 40% 96.1%;         /* ã‚¢ã‚¯ã‚»ãƒ³ãƒˆ */
  --destructive: 0 84.2% 60.2%;    /* èµ¤ */
}

.dark {
  --background: 222.2 84% 4.9%;    /* ãƒ€ãƒ¼ã‚¯ãƒ–ãƒ«ãƒ¼ */
  --foreground: 210 40% 98%;       /* ç™½ */
  --primary: 210 40% 98%;          /* ç™½ */
  --secondary: 217.2 32.6% 17.5%;  /* ãƒ€ãƒ¼ã‚¯ã‚°ãƒ¬ãƒ¼ */
  --accent: 217.2 32.6% 17.5%;     /* ã‚¢ã‚¯ã‚»ãƒ³ãƒˆ */
  --destructive: 0 62.8% 30.6%;    /* ãƒ€ãƒ¼ã‚¯ãƒ¬ãƒƒãƒ‰ */
}
```

---

## âš¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### 1. React.memo

```typescript
// ä¸è¦ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’é˜²æ­¢
const AttackCard = React.memo(({ card, onEdit, onRemove }: Props) => {
  // ...
});
```

### 2. useMemo

```typescript
// è¨ˆç®—çµæœã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥
const totalDamage = useMemo(() => {
  return attackCards.reduce((sum, card) => sum + calculateDamage(card), 0);
}, [attackCards]);
```

### 3. useCallback

```typescript
// é–¢æ•°ã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥
const handleClick = useCallback(() => {
  doSomething(id);
}, [id]);
```

### 4. é…å»¶ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°

```typescript
// SelectCardOverlay ã§ãƒªã‚¹ãƒˆã‚¢ã‚¤ãƒ†ãƒ ã‚’é…å»¶è¡¨ç¤º
setTimeout(() => setShowList(true), 100);
```

### 5. ç”»åƒæœ€é©åŒ–

- **PNGå½¢å¼** (ã‚«ãƒ¼ãƒ‰ç”»åƒ)
- **unoptimized: true** (Static Export ã®ãŸã‚)

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«

- **Vitest** (ãƒ†ã‚¹ãƒˆãƒ©ãƒ³ãƒŠãƒ¼)
- **React Testing Library** (ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ†ã‚¹ãƒˆ)
- **jsdom** (DOMç’°å¢ƒã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³)

### ãƒ†ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«

```
tests/
â””â”€â”€ ui.components.test.tsx    # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ãƒ†ã‚¹ãƒˆ
```

### ãƒ†ã‚¹ãƒˆå†…å®¹

- ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®æç”»ç¢ºèª
- ãƒ©ã‚¤ãƒˆ/ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ä¸¡æ–¹ã§ã®è¡¨ç¤ºç¢ºèª
- ã‚«ãƒ¼ãƒ‰é¸æŠãƒ»è¿½åŠ ãƒ»å‰Šé™¤ã®å‹•ä½œç¢ºèª

---

## ğŸ”’ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### 1. Error Boundary

```typescript
// UIã‚¯ãƒ©ãƒƒã‚·ãƒ¥ã‚’é˜²æ­¢
<ErrorBoundary>
  <CardBattlePage />
</ErrorBoundary>
```

### 2. ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã‚¨ãƒ©ãƒ¼

```typescript
// JSONãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼ã®ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
try {
  const data = await fetch("/api/cards");
  return await data.json();
} catch (error) {
  console.error("Failed to fetch card data:", error);
  return [];
}
```

---

## ğŸ“¦ ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤

### Static Export

```javascript
// next.config.js
const nextConfig = {
  output: "export",           // é™çš„HTMLç”Ÿæˆ
  trailingSlash: true,        // URLã«æœ«å°¾ã‚¹ãƒ©ãƒƒã‚·ãƒ¥è¿½åŠ 
  basePath: process.env.NEXT_PUBLIC_BASE_PATH || "",
  assetPrefix: process.env.NEXT_PUBLIC_BASE_PATH || "",
  images: {
    unoptimized: true,        // ç”»åƒæœ€é©åŒ–ç„¡åŠ¹åŒ– (Static Exportç”¨)
  },
};
```

### é…ä¿¡æ–¹æ³•

- **GitHub Pages** (GitHub Actionsè‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤)
- **Vercel** (æ‰‹å‹•ãƒ‡ãƒ—ãƒ­ã‚¤å¯èƒ½)
- **ãã®ä»–é™çš„ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°** (out/ ãƒ•ã‚©ãƒ«ãƒ€ã‚’é…ä¿¡)

---

## ğŸ”® ä»Šå¾Œã®æ‹¡å¼µæ€§

### æ¨å¥¨ã•ã‚Œã‚‹æ”¹å–„

1. **ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ä¿å­˜**
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼è¨­å®šã®æ°¸ç¶šåŒ–
   - è¨ˆç®—å±¥æ­´ã®ä¿å­˜

2. **URLå…±æœ‰æ©Ÿèƒ½**
   - è¨ˆç®—çµæœã‚’ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã§å…±æœ‰
   - Base64ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ + LZåœ§ç¸®

3. **PWAå¯¾å¿œ**
   - Service Worker
   - ã‚ªãƒ•ãƒ©ã‚¤ãƒ³ä½¿ç”¨

4. **å¤šè¨€èªå¯¾å¿œ**
   - i18nå°å…¥
   - è‹±èª/æ—¥æœ¬èªåˆ‡ã‚Šæ›¿ãˆ

5. **ãƒ†ã‚¹ãƒˆæ‹¡å……**
   - E2Eãƒ†ã‚¹ãƒˆ (Playwright)
   - ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ãƒ†ã‚¹ãƒˆ

---

## ğŸ“š å‚è€ƒè³‡æ–™

- [Next.js å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://nextjs.org/docs)
- [React å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://react.dev/)
- [shadcn/ui](https://ui.shadcn.com/)
- [Tailwind CSS](https://tailwindcss.com/)
- [TypeScript](https://www.typescriptlang.org/)
- [Vitest](https://vitest.dev/)

---

**æœ€çµ‚æ›´æ–°**: 2025-12-22  
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0
