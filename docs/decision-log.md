# Decision Log

設計・実装の決定事項を記録するログ。

---

## 2026-01-04: カード選択UIのモバイル最適化

### Decision
カード選択ダイアログとAttackCardコンポーネントをスマホ画面で見やすく・崩れないように最適化した。

### Options
1. **CSS中心の調整**（採用）- 既存構造を維持しつつ、高さ/padding/フォントサイズを縮小、タブをドロップダウンに変更
2. **Bottom Sheet UI再設計** - UXは向上するが変更が大きく工数増
3. **モバイル専用コンポーネント分離** - 保守コストが2倍になる

### Why
- ユーザー要望が「崩れ・占有・自動フォーカス」という既存UIの調整レベル
- CSS/属性調整で効果が出やすく、影響範囲を小さく抑えられる
- 条件分岐を増やさずスマホ最適へ寄せやすい

### Changes
1. **SelectCardOverlay.tsx**
   - `onOpenAutoFocus={(e) => e.preventDefault()}` 追加 → スマホでキーボードが自動で出ない
   - Tabs（すべて/ユニット/建物/呪文）→ ドロップダウン（select）に変更
   - 並び替えUIを1行にまとめてコンパクト化（h-8サイズ、テキスト短縮）
   - padding/gap/フォントサイズを縮小

2. **AttackCard.tsx**
   - ダメージ入力行のレイアウトを`flex-col`ベースに変更し、小画面でも崩れない構造に
   - ボタン/入力欄を`h-8 w-8`/`h-8 w-12`に縮小
   - フォントサイズを`text-xs`/`text-[10px]`に縮小

3. **E2Eテスト修正**
   - プレースホルダ「カード名で検索...」→「カード名 / IDで検索...」に統一
   - 進化切り替えボタン「進化表示」→「通常」/「進化」に対応

### Verify
- `npm test` → 18/18 passed
- スマホ幅でカード選択ダイアログを開き、キーボードが自動で出ないことを確認
- フィルタ・並び替えが1行に収まることを確認
- AttackCardのダメージ入力が崩れないことを確認

### Rollback
- 各ファイルの変更をgit revertで戻す
- 影響ファイル: `SelectCardOverlay.tsx`, `AttackCard.tsx`, `home.spec.ts`, `damage-calculation.spec.ts`
