# 機能一覧

クラロワダメージ計算ツールの機能一覧です。

---

## 📋 実装済み機能

### 1. 防衛カード管理

| 機能 | 説明 | ステータス |
|------|------|------------|
| カード選択 | オーバーレイからカードを選択 | ✅ 完了 |
| カード画像表示 | 選択したカードの画像を表示 | ✅ 完了 |
| HP表示 | 現在のHP/最大HPを表示 | ✅ 完了 |
| 被ダメージ表示 | 受けた総ダメージを表示 | ✅ 完了 |
| 残りHP表示 | 計算後の残りHPを表示 | ✅ 完了 |
| スクロール追従通知 | 防衛カードが見えない時に通知表示 | ✅ 完了 |

### 2. 攻撃カード管理

| 機能 | 説明 | ステータス |
|------|------|------------|
| カード追加 | 攻撃カードを追加 | ✅ 完了 |
| カード編集 | 既存の攻撃カードを編集 | ✅ 完了 |
| カード削除 | 攻撃カードを削除 | ✅ 完了 |
| 複数カード対応 | 複数の攻撃カードを同時管理 | ✅ 完了 |
| 攻撃回数設定 | 各カードの攻撃回数を設定 | ✅ 完了 |
| 複数ダメージタイプ | 範囲/召喚ダメージ等を個別に設定 | ✅ 完了 |

### 3. ダメージ計算

| 機能 | 説明 | ステータス |
|------|------|------------|
| リアルタイム計算 | 設定変更時に即座に再計算 | ✅ 完了 |
| 複合ダメージ計算 | 複数ダメージタイプの合計 | ✅ 完了 |
| 総ダメージ表示 | 全攻撃カードの合計ダメージ | ✅ 完了 |
| 残りHP計算 | 防衛カードHP - 総ダメージ | ✅ 完了 |

### 4. カード選択オーバーレイ

| 機能 | 説明 | ステータス |
|------|------|------------|
| タブ切り替え | 部隊/建物/呪文タブ | ✅ 完了 |
| カード検索 | 名前でカードを検索 | ✅ 完了 |
| ソート機能 | 日本語名/英語名/IDでソート | ✅ 完了 |
| フィルタリング | attack/defence属性でフィルタ | ✅ 完了 |
| カード選択 | リストからカードを選択 | ✅ 完了 |

### 5. UI/UX

| 機能 | 説明 | ステータス |
|------|------|------------|
| ダークモード | システム設定に応じた表示 | ✅ 完了 |
| レスポンシブ | モバイル/タブレット/デスクトップ対応 | ✅ 完了 |
| ローディング表示 | データ読み込み中のスピナー | ✅ 完了 |
| リセット機能 | 全設定を初期状態に戻す | ✅ 完了 |
| ヘルプ表示 | 使い方の説明を表示 | ✅ 完了 |

### 6. パフォーマンス最適化

| 機能 | 説明 | ステータス |
|------|------|------------|
| React.memo | 不要な再レンダリング防止 | ✅ 完了 |
| useMemo | 計算結果のキャッシュ | ✅ 完了 |
| useCallback | 関数のキャッシュ | ✅ 完了 |
| 遅延レンダリング | オーバーレイリストの遅延表示 | ✅ 完了 |

### 7. エラーハンドリング

| 機能 | 説明 | ステータス |
|------|------|------------|
| Error Boundary | UIクラッシュ防止 | ✅ 完了 |
| データ処理エラー | JSONパースエラーのハンドリング | ✅ 完了 |

---

## 🚧 未実装・改善予定の機能

### 優先度: 高

| 機能 | 説明 | ステータス |
|------|------|------------|
| SEO対策 | メタタグ、OGP設定 | ⏳ 予定 |
| 静的エクスポート | 静的サイト生成 | ⏳ 予定 |
| Vercelデプロイ | 本番環境への公開 | ⏳ 予定 |

### 優先度: 中

| 機能 | 説明 | ステータス |
|------|------|------------|
| ローカルストレージ保存 | 設定の永続化 | 💡 検討中 |
| URL共有機能 | 計算結果をURLで共有 | 💡 検討中 |
| カードデータ更新 | 最新カードの追加 | ⏳ 予定 |
| 画像最適化 | Next.js Image使用 | ⏳ 予定 |

### 優先度: 低

| 機能 | 説明 | ステータス |
|------|------|------------|
| 計算履歴 | 過去の計算結果保存 | 💡 検討中 |
| スクリーンショット | 結果を画像として保存 | 💡 検討中 |
| キーボードショートカット | 操作性向上 | 💡 検討中 |
| PWA対応 | オフライン使用 | 💡 検討中 |
| 多言語対応 | 英語/日本語切り替え | 💡 検討中 |

---

## 📊 カードデータ

### 対応カードタイプ

| タイプ | 説明 | 対応状況 |
|--------|------|----------|
| 部隊 (Troop) | HP、ダメージを持つユニット | ✅ 対応 |
| 建物 (Building) | HP、ダメージを持つ施設 | ✅ 対応 |
| 呪文 (Spell) | ダメージを与える魔法 | ✅ 対応 |
| 進化 (Evo) | 進化版カード | ✅ 対応 |

### カードプロパティ

```typescript
interface Stats {
  hitpoints?: number;           // HP
  damage?: number;              // 通常ダメージ
  area_damage?: number;         // 範囲ダメージ
  ranged_damage?: number;       // 遠距離ダメージ
  crown_tower_damage?: number;  // タワーダメージ
  death_damage?: number;        // 死亡時ダメージ
  spawn_damage?: number;        // 召喚時ダメージ
  dash_damage?: number;         // ダッシュダメージ
  shield_hitpoints?: number;    // シールドHP
  // ... その他
}
```

---

## 🔧 コンポーネント構成

### メインコンポーネント

```
src/components/
├── CardBattlePage.tsx        # メインページ
├── DefenceCard.tsx           # 防衛カード表示
├── AttackCard.tsx            # 攻撃カード表示
├── AttackCardSection.tsx     # 攻撃カードセクション
├── SelectCardOverlay.tsx     # カード選択オーバーレイ
├── SelectableCardListItem.tsx # カードリストアイテム
├── DefenseNotification.tsx   # スクロール追従通知
└── ErrorBoundary.tsx         # エラーバウンダリ
```

### Context

```
src/context/
├── CardContext.tsx           # カード状態管理
└── ChakraProvider.tsx        # Chakra UI設定
```

### ユーティリティ

```
src/utils/
└── cardUtils.ts              # カード関連ヘルパー関数

src/hooks/
└── useResetStateOnClose.ts   # モーダル状態リセット
```

---

## 📈 今後のロードマップ

### Phase 1: 公開準備（現在）
- [x] プロジェクト計画書作成
- [x] コーディング規約策定
- [x] 機能一覧作成
- [ ] SEO/OGP設定
- [ ] Vercelデプロイ

### Phase 2: 機能強化
- [ ] カードデータ更新
- [ ] 画像最適化
- [ ] パフォーマンス改善

### Phase 3: 追加機能
- [ ] ローカルストレージ保存
- [ ] URL共有機能
- [ ] 計算履歴

---

**最終更新**: 2025-12-21
